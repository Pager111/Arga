<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pendaftaran Kompetisi Drone</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
	<link rel="icon" type="image/x-icon" href="/Fav.ico">
<link rel="shortcut icon" href="/Fav.ico">
	<link rel="stylesheet" href="css/templatemo-style.css?v=20250912-3">                                  
    <!-- Templatemo style -->

  <style>
    body{
      min-height:100vh;
      background: url('img/BCG1.png') center/cover no-repeat fixed, #010101;
      color:#000;
      font-family:'Open Sans', Helvetica, Arial, sans-serif;
    }
    /* Logo pojok kiri atas */
    .logo-fixed{
      position:fixed; top:16px; left:16px; z-index:10;
      display:inline-flex; align-items:center; gap:10px;
      padding:6px 10px; background: rgba(255,255,255,.65); border-radius:8px;
      backdrop-filter: blur(4px);
      text-decoration:none;
    }
    .logo-fixed img{ height:46px; display:block; }
    .logo-fixed span{ font-weight:800; font-size:14px; color:#000; letter-spacing:.2px; }

    /* Wrap form di tengah */
    .page-wrap{
      min-height:100vh;
      display:flex; align-items:center; justify-content:center;
      padding: 90px 16px 40px; /* beri ruang agar tidak ketutup logo */
    }

    /* Kartu/form */
    .form-card{
      width:100%; max-width:760px;
      background: rgba(255,255,255,.9);
      border-radius:14px;
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      padding: 28px 24px;
    }
    .form-card h1{
      font-size:28px; font-weight:900; margin:0 0 14px; color:#000;
    }
    .form-help{ margin-top:8px; font-size:14px; color:#333; }

    /* Input & tombol */
    .form-group{ margin-bottom:14px; }
    .form-control{
      background: rgba(255,255,255,.92);
      border-radius:10px; border:1px solid rgba(0,0,0,.12);
      padding: 12px 14px; font-size:16px;
      transition: border-color .15s ease, box-shadow .15s ease;
    }
    .form-control:focus{
      border-color:#0d6efd; box-shadow: 0 0 0 0.15rem rgba(13,110,253,.25);
      outline: none;
    }
    .tm-submit-btn{
      background:#0d6efd; color:#fff; border:none;
      padding: 12px 26px; border-radius:999px; font-size:16px; font-weight:700;
      transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
    }
    .tm-submit-btn:hover{ transform: translateY(-1px); box-shadow:0 8px 22px rgba(13,110,253,.35); }
    .tm-submit-btn:disabled{ opacity:.6; cursor:not-allowed; transform:none; box-shadow:none; }

    /* Status pesan */
    #status-daftar{ margin-top:10px; font-size:14px; font-weight:700; }
    .ok{ color:#1e7e34; } .err{ color:#b02a37; }

    /* Email hint/suggestion */
    .hint{ font-size:12px; margin-top:6px; }
    .hint.ok{ color:#198754; }
    .hint.warn{ color:#cc8b00; }
    .hint.err{ color:#b02a37; }

    .check-list label{ display:block; margin-bottom:6px; font-weight:700; }
    .check-list input[type="checkbox"]{ margin-right:8px; }

    @media (max-width: 480px){
      .logo-fixed img{ height:38px; }
      .form-card{ padding:20px 16px; }
      .form-card h1{ font-size:24px; }
    }
  </style>
</head>
<body>

  <!-- Logo saja (tanpa navbar/menu) -->
  <a class="logo-fixed" href="index.html" aria-label="Kembali ke Home">
    <img src="img/Logo1.png" alt="Logo">
    <span>ARGA YASA KIRNA</span>
  </a>
	
	<!-- 3 logo di pojok kanan atas -->
<div class="logo-right-group" aria-label="Partner/Brand">
  <a href="#" target="_blank" rel="noopener" class="logo-right-item" aria-label="Brand 1">
    <img src="img/KIDN1.png" alt="Brand 1" loading="lazy">
  </a>
  <a href="index.html" target="_blank" rel="noopener" class="logo-right-item" aria-label="Brand 2">
    <img src="img/Logo1.png" alt="Brand 2" loading="lazy">
  </a>
  <a href="#" target="_blank" rel="noopener" class="logo-right-item" aria-label="Brand 3">
    <img src="img/LOGO FASI.png" alt="Brand 3" loading="lazy">
  </a>
	<a href="#" target="_blank" rel="noopener" class="logo-right-item" aria-label="Brand 3">
    <img src="img/LOGO APDI.png" alt="Brand 4" loading="lazy">
  </a>
	<a href="#" target="_blank" rel="noopener" class="logo-right-item" aria-label="Brand 3">
    <img src="img/Logo ASTTA.png" alt="Brand 5" loading="lazy">
  </a>
	
</div>

  <!-- Konten form -->
  <main class="page-wrap">
    <section class="form-card">
      <h1>Form Pendaftaran Kompetisi</h1>

      <form id="form-daftar" class="tm-contact-form" action="https://formspree.io/f/xblabdpv" method="POST" novalidate>
        <!-- Nama Tim -->
        <div class="form-group">
          <label for="nama_tim">Nama Team / Group</label>
          <input type="text" id="nama_tim" name="nama_tim" class="form-control" required />
        </div>

        <!-- Nama Anggota Tim -->
        <div class="form-group">
          <label for="anggota_tim">Nama Anggota Team / Group</label>
          <textarea id="anggota_tim" name="anggota_tim" class="form-control" rows="3"
                    placeholder="Pisahkan dengan koma jika lebih dari satu" required></textarea>
        </div>

        <!-- Bidang diikuti -->
        <div class="form-group check-list">
          <label>Bidang Kompetisi yang Diikuti</label>
          <label><input type="checkbox" name="bidang[]" value="Inovasi Desain Drone Dropping Cargo">Inovasi Desain Drone Dropping Cargo</label>
          <label><input type="checkbox" name="bidang[]" value="Inovasi Desain Drone Tepat Sasaran">Inovasi Desain Drone Tepat Sasaran</label>
          <label><input type="checkbox" name="bidang[]" value="Inovasi Drone Teknologi Terbaru">Inovasi Drone Teknologi Terbaru</label>
        </div>

        <!-- Instansi -->
        <div class="form-group">
          <label for="instansi">Nama Instansi/Perguruan Tinggi/Organisasi</label>
          <input type="text" id="instansi" name="instansi" class="form-control" required />
        </div>

        <!-- Telepon -->
        <div class="form-group">
          <label for="telepon">Nomor Telepon (WhatsApp)</label>
          <input type="text" id="telepon" name="telepon" class="form-control" required />
        </div>

        <!-- Email + mail checker -->
        <div class="form-group">
          <label for="email">Email Aktif</label>
          <input type="email" id="email" name="email" class="form-control" required />
          <div id="email-hint" class="hint" aria-live="polite"></div>
        </div>

        <!-- Anti-bot & meta -->
        <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />
        <input type="hidden" name="_subject" value="Pendaftaran Baru dari Website" />
        <input type="hidden" name="_redirect" value="https://argayasakirna.com/terima-kasih.html" />

        <button id="submit-btn" type="submit" class="tm-submit-btn">Daftar Sekarang</button>
        <p id="status-daftar" role="status" aria-live="polite"></p>
        <p class="form-help">Pastikan data sudah benar sebelum mengirim.</p>
      </form>
    </section>
  </main>

  <!-- JS: mail checker + submit -->
  <script>
    // ===== Mail Checker (format + saran domain) =====
    (function(){
      const emailInput = document.getElementById('email');
      const hint = document.getElementById('email-hint');
      const submitBtn = document.getElementById('submit-btn');

      const commonDomains = [
        "gmail.com","yahoo.com","yahoo.co.id","outlook.com","hotmail.com",
        "live.com","icloud.com","proton.me","protonmail.com","aol.com","ymail.com"
      ];

      function levenshtein(a,b){
        if(a.length===0) return b.length;
        if(b.length===0) return a.length;
        const m = [];
        for(let i=0;i<=b.length;i++){ m[i]=[i]; }
        for(let j=0;j<=a.length;j++){ m[0][j]=j; }
        for(let i=1;i<=b.length;i++){
          for(let j=1;j<=a.length;j++){
            m[i][j] = Math.min(
              m[i-1][j]+1,
              m[i][j-1]+1,
              m[i-1][j-1] + (a[j-1]===b[i-1]?0:1)
            );
          }
        }
        return m[b.length][a.length];
      }

      function validateEmailFormat(v){
        // syarat minimal: ada @ dan dot setelah @, TLD 2-10 huruf
        const basic = /^[^\s@]+@[^\s@]+\.[A-Za-z]{2,10}$/;
        if(!basic.test(v)) return { ok:false, msg:"Format email tidak valid." };

        // cek domain dasar
        const domain = v.split('@')[1];
        if(!domain || domain.indexOf('.')===-1 || domain.includes('..')){
          return { ok:false, msg:"Domain email tidak valid." };
        }
        return { ok:true };
      }

      function suggestDomain(domain){
        let best = null, bestDist = 99;
        for(const d of commonDomains){
          const dist = levenshtein(domain, d);
          if(dist < bestDist){ bestDist = dist; best = d; }
        }
        return (bestDist<=2) ? best : null; // saran jika beda <= 2
      }

      function updateState(){
        const v = emailInput.value.trim();
        if(!v){
          hint.textContent = ""; hint.className = "hint";
          emailInput.setAttribute('aria-invalid','false');
          submitBtn.disabled = false;
          return;
        }

        const res = validateEmailFormat(v);
        if(!res.ok){
          hint.textContent = res.msg;
          hint.className = "hint err";
          emailInput.setAttribute('aria-invalid','true');
          submitBtn.disabled = true;
          return;
        }

        // cek saran domain
        const domain = v.split('@')[1].toLowerCase();
        const sug = suggestDomain(domain);
        if(sug && sug !== domain){
          hint.innerHTML = `Maksudnya <strong>${v.split('@')[0]}@${sug}</strong>?`;
          hint.className = "hint warn";
          emailInput.setAttribute('aria-invalid','false');
          submitBtn.disabled = false;
        }else{
          hint.textContent = "Alamat email terlihat valid.";
          hint.className = "hint ok";
          emailInput.setAttribute('aria-invalid','false');
          submitBtn.disabled = false;
        }
      }

      emailInput.addEventListener('input', updateState);
      emailInput.addEventListener('blur', updateState);
    })();

    // ===== Submit ke Formspree + redirect =====
    (function(){
      const form = document.getElementById('form-daftar');
      const statusEl = document.getElementById('status-daftar');
      const submitBtn = document.getElementById('submit-btn');

      form.addEventListener('submit', async function(e){
        e.preventDefault();
        // jika email invalid (diblok oleh checker)
        if(form.querySelector('#email[aria-invalid="true"]')){
          statusEl.textContent = 'Periksa kembali alamat email Anda.';
          statusEl.className = 'err';
          return;
        }

        statusEl.textContent = 'Mengirim...';
        statusEl.className = '';
        submitBtn.disabled = true;

        try{
          const res = await fetch(form.action, {
            method: 'POST',
            body: new FormData(form),
            headers: { 'Accept': 'application/json' }
          });

          if(res.ok){
            const redirectTo = form.querySelector('input[name="_redirect"]')?.value || '/terima-kasih.html';
            window.location.href = redirectTo; // redirect otomatis
            return;
          }else{
            const data = await res.json().catch(()=>null);
            const msg = data && data.errors
              ? data.errors.map(e=>e.message).join(', ')
              : 'Gagal mengirim.';
            statusEl.textContent = msg;
            statusEl.className = 'err';
          }
        }catch(err){
          statusEl.textContent = 'Gagal konek: ' + err;
          statusEl.className = 'err';
        }finally{
          submitBtn.disabled = false;
        }
      });
    })();
  </script>
</body>
</html>


